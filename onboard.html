<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Conectar Wallet con Onboard UMD</title>
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' https://cdn.blocknative.com;">
  <style>
    body { font-family: sans-serif; text-align: center; padding: 2em; }
    button { padding: 12px 24px; font-size: 16px; }
    #wallet { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Conectar Wallet</h1>
  <button id="connectBtn">Conectar Wallet</button>
  <div id="wallet"></div>

  <!-- ✅ UMD version desde CDN (sin CORS ni módulos) -->
  <script src="https://cdn.blocknative.com/onboard.js"></script>
  <script>
    const onboard = window.Onboard({
      dappId: "", // ← no necesitas uno para testear local
      wallets: [{ walletName: "metamask" }],
      chains: [
        {
          id: "0x1", // Ethereum Mainnet
          token: "ETH",
          label: "Ethereum",
          rpcUrl: "https://rpc.ankr.com/eth" // RPC público
        }
      ]
    });

    document.getElementById("connectBtn").onclick = async () => {
      const wallets = await onboard.connectWallet();
      if (wallets.length > 0) {
        const address = wallets[0].accounts[0].address;
        document.getElementById("wallet").innerText = "Conectado: " + address;
      } else {
        document.getElementById("wallet").innerText = "No se conectó ninguna wallet";
      }
    };
  </script>
</body>
</html>
